# Projection

<br>

### Coordinates

1. **글로벌 좌표계** : Map 전체에서 위치를 나타내는 3D 좌표계.

2. **카메라 좌표계** : 카메라를 중심으로 한 3D 좌표계. 카메라의 초점(렌즈의 중심)이 원점, 정면 광학축 방향이 Z축, 아래쪽이 Y축, 오른쪽이 X축<br>
   ![img](https://t1.daumcdn.net/cfile/tistory/2413B54751EF9E6618)

3. **영상 좌표계** : 영상에서의 2D 좌표계. 이미지의 왼쪽상단(left-top) 모서리를 원점, 오른쪽 방향을 x축 증가방향, 아래쪽 방향을 y축 증가방향

<br>

### How to project 3D to 2D

![img](https://t1.daumcdn.net/cfile/tistory/2364604951EF9E4819)

투영(Projection)은 3D 좌표계를 2D 좌표계로 변환하는 것이다.

영상에서의 좌표를 구하기 위해서는 **글로벌 → 카메라 → 영상좌표계** 과정을 거쳐야 한다.

레이저 센서는 거리와 방향각을 주기 때문에 이로부터 물체의 글로벌 좌표를 알 수 있다.

**글로벌 → 카메라 좌표계**로 변환 시 **Extrinsic Matrix**가 필요하고, 이는 카메라의 위치, 높이, 방향(팬, 틸트) 등에 따른 회전/이동변환 행렬이다.

**카메라 → 영상 좌표계**로 변환시 **Intrinsic Matrix**가 필요하고, 이는 카메라의 초점거리(fx, fy) 등에 따른 내부 파라미터이다.

3D인 카메라 좌표계를 2D인 영상 좌표계로 투영시키기 위해서는 Z=1인 평면으로 먼저 투영시키는데, 이를 **Normalization**이라고 한다.